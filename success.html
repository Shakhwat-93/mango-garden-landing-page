<!DOCTYPE html>
<html lang="bn">
<head>
      <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-WWQWKGX9');</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ‡¶° | ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶Ç‡¶ó‡ßã ‡¶ó‡¶æ‡¶∞‡ßç‡¶°‡ßá‡¶®</title>
      <link rel="icon" type="image/x-icon" href="assests/logo.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;600;700&display=swap');
        
        /* Main Website Theme Colors */
        body { 
            font-family: 'Hind Siliguri', sans-serif; 
            background-color: #FFF8E7; /* Cream Background */
        }
        .text-gur { color: #4A2C2A; }
        .bg-gur { background-color: #4A2C2A; }
        .text-mango { color: #F59E0B; }
        .bg-mango { background-color: #F59E0B; }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <div class="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full text-center border-t-8 border-[#4A2C2A]">
        
        <div class="mb-6">
            <div class="w-24 h-24 bg-orange-100 rounded-full flex items-center justify-center mx-auto animate-bounce">
                <i class="fas fa-check-circle text-5xl text-[#F59E0B]"></i> </div>
        </div>

        <h1 class="text-3xl font-bold text-[#3E2723] mb-2">‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶! üéâ</h1>
        <p class="text-lg text-[#4A2C2A] font-semibold mb-4">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞‡¶ü‡¶ø ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§</p>
        
        <p class="text-[#5D4037] text-sm mb-6">
            ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶®‡¶ø‡¶ß‡¶ø ‡¶∂‡ßÄ‡¶ò‡ßç‡¶∞‡¶á ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞‡ßá ‡¶ï‡¶≤ ‡¶ï‡¶∞‡ßá ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶ú‡¶æ‡¶®‡¶æ‡¶¨‡ßá‡¶®‡•§
        </p>

        <div class="bg-orange-50 rounded-xl p-4 mb-6 text-left border border-orange-100">
            <div class="flex justify-between mb-2">
                <span class="text-[#5D4037] text-sm">‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø:</span>
                <span class="font-mono font-bold text-[#3E2723]" id="order-id">...</span>
            </div>
            <div class="flex justify-between mb-2">
                <span class="text-[#5D4037] text-sm">‡¶ó‡ßç‡¶∞‡¶æ‡¶π‡¶ï‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ:</span>
                <span class="font-bold text-[#3E2723]" id="customer-name">...</span>
            </div>
            <div class="border-t border-dashed border-[#4A2C2A]/20 my-2"></div>
            <div class="flex justify-between">
                <span class="text-[#5D4037] font-bold">‡¶Æ‡ßã‡¶ü ‡¶¨‡¶ø‡¶≤:</span>
                <span class="text-[#4A2C2A] font-bold text-lg" id="total-amount">...</span>
            </div>
        </div>

        <a href="index.html" class="block w-full bg-[#4A2C2A] text-white font-bold py-3 rounded-lg hover:bg-[#3E2723] transition shadow-lg transform active:scale-95">
            <i class="fas fa-arrow-left mr-2"></i> ‡¶Ü‡¶∞‡¶ì ‡¶ï‡ßá‡¶®‡¶æ‡¶ï‡¶æ‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®
        </a>
    </div>

    <script>
        // URL ‡¶•‡ßá‡¶ï‡ßá ‡¶°‡¶æ‡¶ü‡¶æ ‡¶®‡¶ø‡¶Ø‡¶º‡ßá ‡¶™‡ßá‡¶ú‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã
        const urlParams = new URLSearchParams(window.location.search);
        document.getElementById('order-id').innerText = urlParams.get('id') || 'N/A';
        document.getElementById('customer-name').innerText = urlParams.get('name') || 'Guest';
        document.getElementById('total-amount').innerText = urlParams.get('total') || '‡ß≥ 0';
        
        // --- DATA LAYER PUSH (FIXED FOR FULL CUSTOMER DATA) ---
        const purchaseDataString = localStorage.getItem('purchaseData');

        if (purchaseDataString) {
            try {
                const purchaseData = JSON.parse(purchaseDataString);

                window.dataLayer = window.dataLayer || [];
                window.dataLayer.push({
                    'event': 'purchase',
                    // Ecommerce Data
                    'ecommerce': {
                        'currency': purchaseData.currency,
                        'value': purchaseData.value,
                        'transaction_id': purchaseData.transaction_id,
                        'items': purchaseData.items
                    },
                    // --- Full Customer Data (Top Level - Easy to pick in GTM) ---
                    'customer_name': purchaseData.customer.name,
                    'customer_phone': purchaseData.customer.phone,
                    'customer_address': purchaseData.customer.address,
                    // --- User Data Object (For Enhanced Conversions) ---
                    'user_data': {
                        'phone_number': purchaseData.customer.phone,
                        'address': {
                            'first_name': purchaseData.customer.name,
                            'street': purchaseData.customer.address
                        }
                    }
                });
                
                // Clear data to prevent duplicate triggers on reload
                localStorage.removeItem('purchaseData');
                console.log('Purchase data pushed to Data Layer (Including Customer Info)');

            } catch (e) {
                console.error('Error parsing purchase data', e);
            }
        }

        // Clear Cart
        localStorage.removeItem('cart'); 
    </script>

</body>
</html>